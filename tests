import os
import multiprocessing as mp
import tqdm


def sqmf(i):
    print('I am process n {}'.format(os.getpid))
    return i**4


if __name__ == '__main__':
    pl = mp.Pool()

    results = []
    n = 1000000
    for _ in tqdm.tqdm(pl.imap_unordered(sqmf, range(n)), n):
        results.append(_)
    pl.close()
    pl.join()
